webpackJsonp([1],{"3ClX":function(e,t,s){"use strict";var n,i,a=s("VERG"),r=s("aHQ8"),c=1459707606518,o=6;e.exports=function(e){var t="",s=Math.floor(.001*(Date.now()-c));return s===i?n++:(n=0,i=s),t+=a(r.lookup,o),t+=a(r.lookup,e),n>0&&(t+=a(r.lookup,n)),t+=a(r.lookup,s)}},"7W/q":function(e,t){},"9tMA":function(e,t,s){"use strict";var n=s("aHQ8");e.exports=function(e){if(!e||"string"!=typeof e||e.length<6)return!1;for(var t=n.characters(),s=e.length,i=0;i<s;i++)if(-1===t.indexOf(e[i]))return!1;return!0}},Fole:function(e,t,s){"use strict";var n=1;e.exports={nextValue:function(){return(n=(9301*n+49297)%233280)/233280},seed:function(e){n=e}}},HbQr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Xxa5"),i=s.n(n),a=s("exGp"),r=s.n(a),c=(s("GXEp"),s("+BTi"),s("mtrD")),o=s.n(c),l=s("dAsM"),u={name:"page-site-overview",components:{"menu-group":s("Z3QL").a,"el-button":o.a},data:function(){return{freePages:[],navPageConfig:{title:"页面"}}},created:function(){this.pagedao=new l.a("/api/v1/page",this.ctx.servers.shopen),this.getSitePages()},methods:{getSitePages:function(){var e=this;return r()(i.a.mark(function t(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pagedao.list({_site_id:e.$route.params.site});case 2:s=t.sent,e.freePages=s.list;case 4:case"end":return t.stop()}},t,e)}))()},openPageBuilder:function(e){this.$router.push("/page/builder/"+e)},createPage:function(){this.$router.push("/page/edit/"+this.$route.params.site+"/")}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-site-overview overview"},[s("header",[s("h3",[s("span",[e._v("自定义页面")]),e._v(" "),s("div",{staticClass:"header-actions"},[s("el-button",{attrs:{type:"text",size:"medium"},on:{click:e.createPage}},[e._v("创建")])],1)])]),e._v(" "),s("section",{staticClass:"pages"},e._l(e.freePages,function(t,n){return s("div",{key:n,staticClass:"free-page"},[s("div",{staticClass:"snapshot"},[s("div",{staticClass:"image"}),e._v(" "),s("div",{staticClass:"text"},[s("span",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"desc"})])]),e._v(" "),s("div",{staticClass:"opers"},[s("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(s){e.openPageBuilder(t._id)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini"}},[e._v("统计")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"mini"}},[e._v("删除")])],1)])}))])},staticRenderFns:[]};var v=s("VU/8")(u,d,!1,function(e){s("Z2bI")},null,null);t.default=v.exports},ISPo:function(e,t){},Kg7Z:function(e,t,s){"use strict";var n=s("aHQ8"),i=(s("VERG"),s("PIIv")),a=s("3ClX"),r=s("9tMA"),c=s("sSHN")||0;function o(){return a(c)}e.exports=o,e.exports.generate=o,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return c=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.decode=i,e.exports.isValid=r},NP1n:function(e,t){},NtXu:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Xxa5"),i=s.n(n),a=s("exGp"),r=s.n(a),c=(s("GXEp"),s("+BTi"),s("mtrD")),o=s.n(c),l=s("dAsM"),u={name:"mobile-shell-nova",props:{checked:{type:Boolean},cover:{type:String},checkedColor:{type:String,default:"#ff8401"}},data:function(){return{check:{transform:"scale(1.1)",border:"1px solid "+this.checkedColor},background:{backgroundImage:'url("'+this.cover+'")',backgroundSize:"cover"}}}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mobile-shell-nova-outer",style:this.checked?this.check:{}},[t("div",{staticClass:"screen",style:this.background}),this._v(" "),t("div",{staticClass:"home-btn"})])},staticRenderFns:[]};var v=s("VU/8")(u,d,!1,function(e){s("7W/q")},null,null).exports,p=s("Z3QL"),f={name:"page-site-create",components:{MobileShellNova:v,"el-button":o.a,"multi-check":p.b,"mobile-shell-nova":v},data:function(){return{site:{name:"",theme:"bonfire",packages:[]},themes:[{id:"bonfire"},{id:"dasha"},{id:"indochino"},{id:"bonfire"}],packages:[{id:"store",name:"商店",icon:"el-icon-goods"},{id:"lucky-draw",name:"抽奖",icon:"el-icon-picture"},{id:"child-story",name:"故事",icon:"el-icon-service"},{id:"video",name:"视频",icon:"el-icon-picture"},{id:"",name:"微信公号",icon:"el-icon-view"},{id:"activity",name:"活动",icon:"el-icon-date"}]}},created:function(){this.sitedao=new l.a("/api/v1/site",this.ctx.servers.shopen),this.pagedao=new l.a("/api/v1/page",this.ctx.servers.shopen)},methods:{getCoverImage:function(e){return this.ctx.servers.image.options.baseURL+"/themes/"+e.id+"/previews/cover.png"},chooseTheme:function(e){this.site.theme=e.id},togglePackage:function(e){e.selected=!e.selected},returnList:function(){this.$router.replace("/sites")},saveSite:function(){var e=this;return r()(i.a.mark(function t(){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sitedao.create(e.site);case 2:return s=t.sent,t.next=5,e.pagedao.create({path:"/",name:"首页",_site_id:s.object._id});case 5:e.$router.replace("/sites");case 6:case"end":return t.stop()}},t,e)}))()}}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"site-layout site-create"},[s("div",{staticClass:"header"},[s("div",{staticClass:"header-actions"},[s("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-back"},on:{click:e.returnList}},[e._v("返回列表")]),e._v(" "),s("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-check"},on:{click:e.saveSite}},[e._v("保存")])],1)]),e._v(" "),s("div",{staticClass:"content"},[s("section",{staticClass:"form"},[s("label",[s("span",{staticClass:"key"},[e._v("名称")]),e._v(" "),s("span",{staticClass:"val"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.name,expression:"site.name"}],attrs:{type:"text",placeholder:"站点名称"},domProps:{value:e.site.name},on:{input:function(t){t.target.composing||e.$set(e.site,"name",t.target.value)}}})])]),e._v(" "),s("label",[s("span",{staticClass:"key"},[e._v("主题")]),e._v(" "),s("span",{staticClass:"val themes"},e._l(e.themes,function(t,n){return s("mobile-shell-nova",{key:n,attrs:{checked:t.id===e.site.theme,cover:e.getCoverImage(t)},nativeOn:{click:function(s){e.chooseTheme(t)}}})}))]),e._v(" "),s("label",[s("span",{staticClass:"key"},[e._v("功能模块")]),e._v(" "),s("span",{staticClass:"val packages"},[s("multi-check",{attrs:{items:e.packages,"item-key":"id","item-class":"package"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[s("i",{class:n.icon}),e._v(" "),s("div",{staticClass:"name"},[e._v(e._s(n.name))])]}}]),model:{value:e.site.packages,callback:function(t){e.$set(e.site,"packages",t)},expression:"site.packages"}})],1)])])])])},staticRenderFns:[]};var m=s("VU/8")(f,h,!1,function(e){s("fumO")},null,null);t.default=m.exports},PIIv:function(e,t,s){"use strict";var n=s("aHQ8");e.exports=function(e){var t=n.shuffled();return{version:15&t.indexOf(e.substr(0,1)),worker:15&t.indexOf(e.substr(1,1))}}},RsIf:function(e,t){},VERG:function(e,t,s){"use strict";var n=s("Zkn8");e.exports=function(e,t){for(var s,i=0,a="";!s;)a+=e(t>>4*i&15|n()),s=t<Math.pow(16,i+1),i++;return a}},Z2bI:function(e,t){},Z3QL:function(e,t,s){"use strict";var n={name:"multi-check",props:{items:{type:Array},itemKey:{type:String},value:{type:Array},itemClass:{type:String}},data:function(){return{checkedKeys:this.value}},created:function(){},methods:{toggleCheck:function(e){var t=e;this.itemKey&&(t=e[this.itemKey]);for(var s=!1,n=0;n<this.checkedKeys.length;n++)if(this.checkedKeys[n]===t){this.checkedKeys.splice(n,1),s=!0;break}s||this.checkedKeys.push(t),this.$emit("input",this.checkedKeys)},computedClass:function(e){var t=e;this.itemKey&&(t=e[this.itemKey]);var s={};return this.itemClass&&(s[this.itemClass]=!0),this.checkedKeys.indexOf(t)>-1&&(s[this.selected||"selected"]=!0),s}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"multi-check"},e._l(e.items,function(t,n){return s("div",{key:n,class:e.computedClass(t),on:{click:function(s){e.toggleCheck(t)}}},[e._t("default",null,{item:t})],2)}))},staticRenderFns:[]},a=s("VU/8")(n,i,!1,null,null,null).exports,r={name:"left-menu-group",props:{config:{type:Object}},components:{}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"left-menu-group"},[s("h3",{staticClass:"group-title"},[e.config.title?s("span",{staticClass:"title"},[e._v(e._s(e.config.title))]):e._e(),e._v(" "),s("div",{staticClass:"actions"},[e._t("title-append")],2)]),e._v(" "),e.config.menus&&e.config.menus.length?s("ul",{staticClass:"nav-list"},[e._t("list-prepend"),e._v(" "),e._l(e.config.menus,function(t,n){return s("li",{key:n},[s("div",{staticClass:"info"},[s("span",{staticClass:"filter-label"},[e._v(e._s(t.name))])])])}),e._v(" "),e._t("list-append")],2):e._e()])},staticRenderFns:[]};var o=s("VU/8")(r,c,!1,function(e){s("RsIf")},null,null).exports;s.d(t,"b",function(){return a}),s.d(t,"a",function(){return o})},Z8es:function(e,t,s){"use strict";e.exports=s("Kg7Z")},Zkn8:function(e,t,s){"use strict";var n="object"==typeof window&&(window.crypto||window.msCrypto);e.exports=function(){if(!n||!n.getRandomValues)return 48&Math.floor(256*Math.random());var e=new Uint8Array(1);return n.getRandomValues(e),48&e[0]}},aHQ8:function(e,t,s){"use strict";var n,i,a,r=s("Fole"),c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function o(){a=!1}function l(e){if(e){if(e!==n){if(e.length!==c.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter(function(e,t,s){return t!==s.lastIndexOf(e)});if(t.length)throw new Error("Custom alphabet for shortid must be "+c.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,o()}}else n!==c&&(n=c,o())}function u(){return a||(a=function(){n||l(c);for(var e,t=n.split(""),s=[],i=r.nextValue();t.length>0;)i=r.nextValue(),e=Math.floor(i*t.length),s.push(t.splice(e,1)[0]);return s.join("")}())}e.exports={characters:function(e){return l(e),n},seed:function(e){r.seed(e),i!==e&&(o(),i=e)},lookup:function(e){return u()[e]},shuffled:u}},dAsM:function(e,t,s){"use strict";t.a=class{constructor(e,t){this.root=e,this.client=t}async create(e){return await this.client.post(`${this.root}`,e)}async list(e){return await this.client.get(`${this.root}`,e)}async patch(e,t){return await this.client.patch(`${this.root}/${e}`,t)}async delete(e){return await this.client.delete(`${this.root}/${e}`)}}},fumO:function(e,t){},lEBE:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Xxa5"),i=s.n(n),a=s("exGp"),r=s.n(a),c=s("Z8es"),o=s.n(c),l=s("dAsM"),u={name:"site-page-edit",components:{},data:function(){return{name:"",url:o.a.generate(),template:""}},created:function(){this.pagedao=new l.a("/api/v1/page",this.ctx.servers.shopen)},methods:{savePage:function(){var e=this;return r()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.name.trim()){t.next=3;break}return e.$message({showClose:!0,message:"请输入页面名称",type:"error"}),t.abrupt("return");case 3:return t.next=5,e.pagedao.create({_site_id:e.$route.params.site,name:e.name,url:e.url,template:e.template});case 5:e.returnSite();case 6:case"end":return t.stop()}},t,e)}))()},returnSite:function(){var e=this;return r()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$router.replace("/site/show/"+e.$route.params.site);case 1:case"end":return t.stop()}},t,e)}))()}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-edit"},[e._m(0),e._v(" "),s("div",{staticClass:"item"},[s("label",[e._v("页面名称")]),e._v(" "),s("div",{staticClass:"item-content"},[s("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),e._v(" "),s("div",{staticClass:"item"},[s("label",[e._v("页面地址")]),e._v(" "),s("div",{staticClass:"item-content"},[s("el-input",{model:{value:e.url,callback:function(t){e.url=t},expression:"url"}})],1)]),e._v(" "),s("div",{staticClass:"item"},[s("label",[e._v("模板")]),e._v(" "),s("div",{staticClass:"item-content"},[s("el-select",{model:{value:e.template,callback:function(t){e.template=t},expression:"template"}})],1)]),e._v(" "),s("div",{staticClass:"submit"},[s("el-button",{attrs:{type:"primary",round:""},on:{click:e.savePage}},[e._v("保存")]),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:e.returnSite}},[e._v("取消")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-title"},[t("h3",[this._v("新增页面")])])}]};var v=s("VU/8")(u,d,!1,function(e){s("NP1n")},"data-v-6a31170b",null);t.default=v.exports},nvAB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Xxa5"),i=s.n(n),a=s("exGp"),r=s.n(a),c=(s("GXEp"),s("+BTi"),s("mtrD")),o=s.n(c),l=s("dAsM"),u={name:"site-list",components:{"el-button":o.a},data:function(){return{sites:[]}},created:function(){this.sitedao=new l.a("/api/v1/site",this.ctx.servers.shopen),this.listSites()},methods:{createSite:function(){this.$router.replace("/site/create")},listSites:function(){var e=this;return r()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sitedao.list();case 2:e.sites=t.sent.list;case 3:case"end":return t.stop()}},t,e)}))()},enterSite:function(e){this.$router.push("/site/show/"+e._id)}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"site-list site-layout"},[s("div",{staticClass:"header"},[s("div",{staticClass:"header-actions"},[s("el-button",{attrs:{type:"primary",size:"medium",plain:"",icon:"el-icon-edit"},on:{click:e.createSite}},[e._v("创建站点")])],1)]),e._v(" "),s("div",{staticClass:"content"},e._l(e.sites,function(t,n){return s("div",{key:n,staticClass:"site",on:{click:function(s){e.enterSite(t)}}},[s("div",{staticClass:"icon"}),e._v(" "),s("div",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticClass:"visits"},[e._v("10+")]),e._v(" "),e._m(0,!0)])}))])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"icons"},[t("i",{staticClass:"el-icon-setting"}),this._v(" "),t("i",{staticClass:"el-icon-view"}),this._v(" "),t("i",{staticClass:"el-icon-delete"})])}]};var v=s("VU/8")(u,d,!1,function(e){s("ISPo")},null,null);t.default=v.exports},sSHN:function(e,t,s){"use strict";e.exports=0}});