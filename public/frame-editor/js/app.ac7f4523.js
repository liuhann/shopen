(function(e){function t(t){for(var i,c,o=t[0],s=t[1],u=t[2],m=0,f=[];m<o.length;m++)c=o[m],a[c]&&f.push(a[c][0]),a[c]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(i=!1)}i&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},a={app:0},r=[];function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="http://cdn.danke.fun/frame-editor/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("frames-config",{staticClass:"config",attrs:{animation:e.animation},on:{"frame-change":e.frameChange}}),n("div",{attrs:{id:"preview"}},[n("div",{staticClass:"box",class:e.boxClass,style:e.frameStyle,attrs:{id:"box"}}),n("div",{staticClass:"btns"},[n("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-caret-right"},on:{click:e.play}}),n("el-button",{attrs:{type:"text",icon:"el-icon-share"},on:{click:e.share}})],1)])],1)},r=[],c=(n("0fb7"),n("450d"),n("f529")),o=n.n(c),s=(n("96cf"),n("3b8d")),u=(n("7f7f"),n("1951"),n("eedf")),l=n.n(u),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"animation-config"},[n("div",{staticClass:"frames"},[n("item-block",{attrs:{label:"动画名称"}},[n("el-input",{attrs:{size:"mini"},model:{value:e.animation.name,callback:function(t){e.$set(e.animation,"name",t)},expression:"animation.name"}})],1),n("edit-len",{attrs:{label:"时长","with-unit":!1,step:50},model:{value:e.animation.duration,callback:function(t){e.$set(e.animation,"duration",t)},expression:"animation.duration"}}),n("item-block",{attrs:{label:"曲线"}},[n("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.animation.timing,callback:function(t){e.$set(e.animation,"timing",t)},expression:"animation.timing"}},e._l(e.cubicBeziers,function(e,t){return n("el-option",{key:t,attrs:{label:t,value:e}})}),1)],1),n("edit-len",{attrs:{label:"延迟","with-unit":!1,step:50},model:{value:e.animation.delay,callback:function(t){e.$set(e.animation,"delay",t)},expression:"animation.delay"}}),n("edit-len",{attrs:{label:"次数","with-unit":!1},model:{value:e.animation.iteration,callback:function(t){e.$set(e.animation,"iteration",t)},expression:"animation.iteration"}},[n("el-checkbox",{model:{value:e.animation.infinite,callback:function(t){e.$set(e.animation,"infinite",t)},expression:"animation.infinite"}},[e._v("循环")])],1),n("el-timeline",e._l(e.animation.frames,function(t,i){return n("el-timeline-item",{key:i,staticClass:"time-line-item",attrs:{placement:"top","hide-timestamp":!0,timestamp:t.percent+"%"}},[n("div",{staticClass:"button-percent"},[e._v("\r\n          "+e._s(t.percent)+"%\r\n          "),n("div",{staticClass:"btns",staticStyle:{float:"right","margin-top":"-7px"}},[100!==t.percent?n("el-button",{attrs:{size:"mini",icon:"el-icon-plus",type:"text"},on:{click:function(t){return e.appendFrame(i)}}}):e._e(),100!==t.percent&&0!==t.percent?n("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"text"},on:{click:function(t){return e.removeFrame(i)}}}):e._e(),e.currentFrameIndex===i?n("el-button",{attrs:{size:"mini",icon:"el-icon-arrow-down",type:"text"},on:{click:e.closeFrame}}):e._e(),e.currentFrameIndex!==i?n("el-button",{attrs:{size:"mini",icon:"el-icon-arrow-right",type:"text"},on:{click:function(t){return e.editFrame(i)}}}):e._e()],1)]),e.currentFrameIndex===i?n("div",{staticClass:"frame-dialog-content"},[n("item-block",{attrs:{label:"进度"}},[n("el-input-number",{attrs:{disabled:100===t.percent||0===t.percent,size:"mini",step:5,max:100,min:0},model:{value:t.percent,callback:function(n){e.$set(t,"percent",n)},expression:"frame.percent"}})],1),n("edit-transform",{model:{value:t.transform,callback:function(n){e.$set(t,"transform",n)},expression:"frame.transform"}}),n("edit-clip-path",{model:{value:t.clip,callback:function(n){e.$set(t,"clip",n)},expression:"frame.clip"}})],1):e._e()])}),1)],1)])},f=[],d=(n("2f02"),n("fe11")),p=n.n(d),b=(n("ed7b"),n("e1a5")),h=n.n(b),v=(n("9d4c"),n("e450")),x=n.n(v),y=(n("ae26"),n("845f")),g=n.n(y),z=n("def3"),O=n("2410"),k=n.n(O),I=n("825d"),w=n("64dd"),C={percent:0,clip:I["a"],transform:w["a"]},_={ease:"ease",linear:"linear",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"};i["default"].use(l.a),i["default"].use(g.a),i["default"].use(x.a),i["default"].use(h.a),i["default"].use(p.a);var F={name:"FramesConfig",props:{animation:{type:Object}},components:{ItemBlock:z["d"],EditTransform:z["c"],EditClipPath:z["a"],EditLen:z["b"]},data:function(){return{cubicBeziers:_,activeNames:[],currentFrameIndex:0,dialogVisible:!1}},watch:{animation:{deep:!0,handler:function(){this.$emit("frame-change",this.currentFrameIndex)}}},methods:{appendFrame:function(e){var t=k()(C);t.percent=50,this.animation.frames.splice(e+1,0,t),this.currentFrameIndex=e+1},editFrame:function(e){this.currentFrameIndex=e},removeFrame:function(e){this.animation.frames.splice(e,1),this.currentFrameIndex=e-1},closeFrame:function(){this.currentFrameIndex=-1}}},j=F,S=(n("b4dc"),n("2877")),$=Object(S["a"])(j,m,f,!1,null,null,null),E=$.exports,Q=n("5d73"),P=n.n(Q),B=n("d60a");function T(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}function M(e,t,n){var i=e.length,a="@keyframes "+t+"{"+n+"}";e.insertRule(a,i),console.log(e)}function N(e,t){var n=e.length,i=".".concat(t.name," {\n    animation: ").concat(t.name," ").concat(t.duration,"ms ").concat(t.timing," ").concat(t.infinite?"infinite":t.iteration," both\n  }");e.insertRule(i,n)}function R(e){var t=[],n=!0,i=!1,a=void 0;try{for(var r,c=P()(e);!(n=(r=c.next()).done);n=!0){var o=r.value;t.push("".concat(o.percent,"%{").concat(Object(B["a"])(o),"}"))}}catch(s){i=!0,a=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}return t.join("")}function J(e){document.head.removeChild(e.ownerNode)}function A(e,t){M(e,t.name,R(t.frames)),N(e,t)}var H=n("5118"),L=n("d823");i["default"].use(l.a);var U={name:"app",components:{FramesConfig:E},computed:{},data:function(){var e=[];e.push(k()(C));var t=k()(C);return t.percent=100,e.push(t),{boxClass:"",frameStyle:"",animationName:"",frameIndex:-1,animation:{name:"myAnimation",duration:600,iteration:1,delay:0,timing:"linear",infinite:!1,frames:e}}},watch:{},created:function(){this.client=L["a"].extend({prefixUrl:"http://www.danke.fun/api/",throwHttpErrors:!1})},mounted:function(){},methods:{play:function(){var e=this;this.sheet&&J(this.sheet),this.sheet=T(),this.boxClass="",A(this.sheet,this.animation),this.frameStyle="",Object(H["setTimeout"])(function(){e.boxClass=e.animation.name},300)},share:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.client.put("animation",{json:this.animation}).json();case 2:t=e.sent,409===t.code?o()({message:"动画名称和现有的冲突",type:"warning"}):o()({message:"保存成功"});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),frameChange:function(e){null!=e&&(this.frameIndex=e);var t=this.animation.frames[this.frameIndex];console.log("frame change",t),this.frameStyle=Object(B["a"])(t)}}},V=U,q=(n("5c0b"),Object(S["a"])(V,a,r,!1,null,null,null)),D=q.exports;i["default"].config.productionTip=!1,new i["default"]({render:function(e){return e(D)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("5e27"),a=n.n(i);a.a},"5e27":function(e,t,n){},b4dc:function(e,t,n){"use strict";var i=n("f088"),a=n.n(i);a.a},f088:function(e,t,n){}});