(function(e){function t(t){for(var r,a,o=t[0],u=t[1],c=t[2],l=0,h=[];l<o.length;l++)a=o[l],i[a]&&h.push(i[a][0]),i[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==i[o]&&(r=!1)}r&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={index:0},i={index:0},s=[];function o(e){return u.p+"js/"+({"designer~frame-tool~style-tool":"designer~frame-tool~style-tool",designer:"designer","frame-tool":"frame-tool","style-tool":"style-tool",site:"site",story:"story","story-manage":"story-manage",user:"user"}[e]||e)+"."+{"designer~frame-tool~style-tool":"dd3ccceb",designer:"842dfea3","frame-tool":"a0775be8","style-tool":"3eae9e16",site:"3fc7a5e7",story:"999c972b","story-manage":"6337906a",user:"d630649d"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"designer~frame-tool~style-tool":1,designer:1,"frame-tool":1,"style-tool":1,site:1,story:1,"story-manage":1,user:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({"designer~frame-tool~style-tool":"designer~frame-tool~style-tool",designer:"designer","frame-tool":"frame-tool","style-tool":"style-tool",site:"site",story:"story","story-manage":"story-manage",user:"user"}[e]||e)+"."+{"designer~frame-tool~style-tool":"1a5268ce",designer:"d6d6c79e","frame-tool":"048ba05b","style-tool":"17cb6131",site:"0e433876",story:"cfa5e164","story-manage":"17e079c8",user:"41610593"}[e]+".css",i=u.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===i))return t()}var h=document.getElementsByTagName("style");for(o=0;o<h.length;o++){c=h[o],l=c.getAttribute("data-href");if(l===r||l===i)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,delete a[e],f.parentNode.removeChild(f),n(s)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)}).then(function(){a[e]=0}));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise(function(t,n){r=i[e]=[t,n]});t.push(r[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(e),c=function(t){l.onerror=l.onload=null,clearTimeout(h);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");s.type=r,s.request=a,n[1](s)}i[e]=void 0}};var h=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("f161")},"1d3a":function(e,t,n){"use strict";var r=n("8df7"),a=n.n(r);a.a},"520f":function(e,t,n){},"62ab":function(e,t,n){},"655c":function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return h});var r=n("bd86"),a=n("5176"),i=n.n(a),s=n("a745"),o=n.n(s),u=n("7618");function c(e){return e&&"object"===Object(u["a"])(e)&&!o()(e)}function l(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var s=n.shift();if(c(e)&&c(s))for(var o in s)c(s[o])?(e[o]||i()(e,Object(r["a"])({},o,{})),l(e[o],s[o])):i()(e,Object(r["a"])({},o,s[o]));return l.apply(void 0,[e].concat(n))}function h(e){if(null==e||"object"!==Object(u["a"])(e))return e;if(e instanceof Array){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=h(e[n]);return t}if(e instanceof Object){var a={};for(var i in e)e.hasOwnProperty(i)&&(a[i]=h(e[i]));return a}return e}},"8df7":function(e,t,n){},f161:function(e,t,n){"use strict";n.r(t);n("96cf");var r=n("3b8d"),a=(n("cadf"),n("551c"),n("f751"),n("097d"),n("520f"),n("62ab"),n("2fce")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],o={name:"view.vue",data:function(){return{}},computed:{}},u=o,c=n("2877"),l=Object(c["a"])(u,i,s,!1,null,null,null),h=l.exports,f=n("2b0e"),p=n("8c4f"),d={routes:[{path:"/",component:function(){return n.e("site").then(n.bind(null,"9ac0"))}}],onload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},y={routes:[{path:"/designer/:type?",component:function(){return Promise.all([n.e("designer~frame-tool~style-tool"),n.e("designer")]).then(n.bind(null,"499d"))}}]},v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"danke-runtime"},e._l(e.scenes,function(t,r){return n("div",{key:r,staticClass:"scene",style:t.style},e._l(t.elements,function(t,r){return n("div",{key:t.id,staticClass:"element-wrapper",style:t.style,on:{click:function(t){return e.onElementClicked(r)}}},[e._v("\r\n      "+e._s(t.content)+"\r\n    ")])}),0)}),0)},m=[],g=n("5d73"),b=n.n(g),w=n("d225"),k=n("b0b4"),x=n("b162"),j=n.n(x),R=function(){function e(t,n){Object(w["a"])(this,e),this.device=n,this.scenes=t,this.displays={current:null,fore:null,back:null},this.index=-1,this.initSceneStyleAttr()}return Object(k["a"])(e,[{key:"setDevice",value:function(e){this.device=e}},{key:"hasNext",value:function(){return this.scenes.length-1>this.index}},{key:"next",value:function(){if(this.index++,this.index>this.scenes.length-1)this.playEndCallback&&this.playEndCallback(this);else{this.displays.current&&this.leaveScene(this.displays.current),this.displays.current=this.scenes[this.index];while("slide"!==this.displays.current.type)this.index++,this.displays.current=this.scenes[this.index];this.checkForBack(),this.enterScene(this.displays.current)}}},{key:"checkForBack",value:function(){for(var e=null,t=null,n=this.index;n>-1;n--)if(e||"background"!==this.scenes[n].type||(e=this.scenes[n]),t||"foreground"!==this.scenes[n].type||(t=this.scenes[n]),e&&t)break;e&&e!==this.displays.back&&(this.enterScene(e),this.displays.back&&this.leaveScene(this.displays.back),this.displays.back=e),t&&t!==this.displays.fore&&(this.enterScene(t),this.displays.fore&&this.leaveScene(this.displays.fore),this.displays.fore=t)}},{key:"initSceneStyleAttr",value:function(){for(var e=0;e<this.scenes.length;e++){var t=this.scenes[e];if(t.style="display: none",t.elements){var n=!0,r=!1,a=void 0;try{for(var i,s=b()(t.elements);!(n=(i=s.next()).done);n=!0){var o=i.value;o.style=""}}catch(u){r=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}t.index=e}}},{key:"enterScene",value:function(e){this.renderEnter(e),this.sceneEnterCallback&&this.sceneEnterCallback(this),e.duration&&"slide"===e.type&&(this.pauseForLeave=j.a.setTimeout(this.next.bind(this),e.duration))}},{key:"renderEnter",value:function(e){var t=this,n=!0,r=!1,a=void 0;try{for(var i,s=function(){var e=i.value;e.style=styleUtils.getElementStyle(e,t.device,"in"),e.existence.animation&&e.existence.duration&&j.a.setTimeout(function(){e.style=styleUtils.getElementStyle(e,t.device,"existence")},e.in.duration+e.in.delay)},o=b()(e.elements);!(n=(i=o.next()).done);n=!0)s()}catch(u){r=!0,a=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}e.style="display: inherit; ".concat(styleUtils.getSceneStyle(e,this.device))}},{key:"leaveScene",value:function(e){var t=this;this.renderLeave(e),this.sceneLeaveCallback&&this.sceneLeaveCallback(this),j.a.setTimeout(function(){e.style="display: none",t.sceneHideCallback&&t.sceneHideCallback(t)},e.hideDelay||3e3)}},{key:"renderLeave",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=b()(e.elements);!(t=(a=i.next()).done);t=!0){var s=a.value;s.style=styleUtils.getElementStyle(s,this.device,"out")}}catch(o){n=!0,r=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}},{key:"sceneEnter",value:function(e){this.sceneEnterCallback=e}},{key:"sceneLeave",value:function(e){this.sceneLeaveCallback=e}},{key:"sceneHide",value:function(e){this.sceneHideCallback=e}},{key:"playEnd",value:function(e){this.playEndCallback=e}}]),e}(),O=n("655c"),S={name:"Player",props:{},data:function(){return{scenes:[],device:{width:window.innerWidth,height:window.innerHeight}}},created:function(){var e=this;if(this.$route.params.id)this.ctx.workdao.getWork(this.$route.params.id).then(function(t){var n=new R(t.scenes,e.device);document.title="蛋壳分享:"+t.title,e.scenes=n.scenes,e.$nextTick(function(){n.next()})});else if(this.ctx.work){var t=Object(O["a"])(this.ctx.work),n=new R(t.scenes,this.device);document.title="蛋壳分享:"+t.title,this.scenes=n.scenes,this.$nextTick(function(){n.next()})}},methods:{onElementClicked:function(){}}},C=S,E=(n("1d3a"),Object(c["a"])(C,v,m,!1,null,null,null)),P=E.exports,_={routes:[{path:"/play/:id?",component:P}]},A=function(){function e(t){Object(w["a"])(this,e),this.ctx=t}return Object(k["a"])(e,[{key:"getCurrentUser",value:function(){return this.ctx.get("user/current").json()}},{key:"register",value:function(e,t,n){return this.ctx.post("user/register",{json:{name:e,password:t,nickname:n}}).json()}},{key:"login",value:function(e,t,n){return this.ctx.post("user/login",{json:{name:e,password:t,captcha:n}}).json()}},{key:"getCaptcha",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ctx.get("captcha").json());case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"sendSmsCode",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ctx.get("user/sms/".concat(t)).json());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){}}]),e}(),T=A,L={routes:[{path:"/user",component:function(){return n.e("user").then(n.bind(null,"d0f4"))}},{path:"/register",component:function(){return n.e("user").then(n.bind(null,"27c2"))}}],onload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.userdao=new T(t);case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},D=function(){function e(t){Object(w["a"])(this,e),this.ctx=t}return Object(k["a"])(e,[{key:"addAnimation",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ctx.put("animation",{json:t}).json());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAnimationList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ctx.get("animation/list",{searchParams:{type:t,skip:n,limit:r}}).json());case 1:case"end":return e.stop()}},e,this)}));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"removeAnimation",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.ctx.delete("animation?_id=".concat(t),{searchParams:{_id:t}}).json());case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),H={routes:[{path:"/frame-tool",component:function(){return Promise.all([n.e("designer~frame-tool~style-tool"),n.e("frame-tool")]).then(n.bind(null,"c22b"))}},{path:"/frame-list",component:function(){return Promise.all([n.e("designer~frame-tool~style-tool"),n.e("frame-tool")]).then(n.bind(null,"a8a5"))}}],onload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.animdao=new D(t);case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},U={routes:[{path:"/style-tool",component:function(){return Promise.all([n.e("designer~frame-tool~style-tool"),n.e("style-tool")]).then(n.bind(null,"1773"))}}],onload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},B=(n("7514"),n("5176")),F=n.n(B),M=(n("7f7f"),function(){function e(t){Object(w["a"])(this,e),this.ctx=t}return Object(k["a"])(e,[{key:"listHome",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("story/home").json();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"patchStory",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.ky.patch("ybstory/story/".concat(t._id),{json:{title:t.title,album:t.album,label:t.label,teller:t.teller}});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteStory",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.ky.patch("ybstory/story/".concat(t._id),{json:{deleted:!0}});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"adminList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.page,t.size,t.query,e.next=3,this.ctx.get("/api/story/admin/list?skip="+(n-1)*this.pageSize+"&limit="+this.pageSize);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStoryRelated",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("story/related/".concat(t._id)).json();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"listAllLabels",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("/story/labels");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAllAlbums",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("/story/album/list");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAlbumDetail",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("/story/album/info?album="+t.name);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"filterStory",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("ybstory/story/list",{searchParams:F()(t,{page:n,count:r})}).json();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e,this)}));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getUserByToken",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("".concat(this.root,"/user/token/check?token=").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStoryContent",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("".concat(this.root,"/story/content?story=")+t._id);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"addFavorite",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isFavorite(t)){e.next=2;break}return e.abrupt("return");case 2:return this.db.get("favorites").push(t).write(),e.next=5,this.ctx.post("".concat(this.root,"/user/favorite/add?token=").concat(n),t);case 5:e.sent;case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getFavorites",value:function(){return this.db.get("favorites").value()}},{key:"addDownload",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isDownloaded(t)){e.next=2;break}return e.abrupt("return");case 2:t.downloaded=!0,this.db.get("downloads").push(t).write();case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDownloads",value:function(){return this.db.get("downloads").value()}},{key:"isDownloaded",value:function(e){var t=this.db.get("downloads").find({path:e.path}).value();return!!t}},{key:"isFavorite",value:function(e){var t=this.db.get("favorites").find({path:e.path}).value();return!!t}},{key:"addPlayHistory",value:function(e){var t=this.db.get("historys").find({path:e.path}).value(),n=1;t&&(t.count&&(n=t.count+1),this.db.get("historys").remove({path:e.path}).write()),e.count=n,e.updated=(new Date).getTime(),this.db.get("historys").push(e).write(),this.ctx.post("".concat(this.root,"/user/play/log?user=").concat(localStorage.getItem("user")),{story:e.title,path:e.path,storyId:e._id})}},{key:"getHistories",value:function(){var e=this.db.get("historys").orderBy(["updated"],["desc"]).value(),t={day3:[],day7:[],olders:[]},n=(new Date).getTime(),r=2592e5,a=2592e5,i=!0,s=!1,o=void 0;try{for(var u,c=b()(e);!(i=(u=c.next()).done);i=!0){var l=u.value;n-l.updated<r?t.day3.push(l):n-l.updated<a?t.day7.push(l):t.olders.push(l)}}catch(h){s=!0,o=h}finally{try{i||null==c.return||c.return()}finally{if(s)throw o}}return t}},{key:"getAlbums",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.get("ybstory/album/list",{searchParams:{count:1e3}}).json();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteAlbum",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.ctx.delete("ybstory/album/".concat(t._id)).json();case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),N={routes:[{path:"/story",component:function(){return n.e("story").then(n.bind(null,"aa55"))}},{path:"/story/manage",component:function(){return n.e("story-manage").then(n.bind(null,"8c60"))}},{path:"/story/album/manage",component:function(){return n.e("story-manage").then(n.bind(null,"70e1"))}}],onload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.storydao=new M(t);case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},$=n("d823");function z(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++){var a=Math.round(Math.random()*(n.length-1));t+=n.substring(a,a+1)}return t}function I(e){var t=window.localStorage.getItem("token");t||(t=z(10),window.localStorage.setItem("token",t));var n=$["a"].extend({prefixUrl:"http://www.danke.fun/api/",throwHttpErrors:!1,searchParams:{token:t}});e.ky=n,e.get=n.get,e.put=n.put,e.post=n.post,e.delete=n.delete}f["default"].use(p["a"]),window.Vue=f["default"];var q=new a["a"]({Vue:f["default"],VueRouter:p["a"],App:h,mode:"history",appServer:"http://www.danke.fun",cdn:"http://cdn.danke.fun",mount:"#app",packages:[d,y,_,L,H,U,N],started:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return I(t),e.next=3,n();case 3:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),upload:{maxSize:2097152}});q.startUp()}});
//# sourceMappingURL=index.3d78548b.js.map